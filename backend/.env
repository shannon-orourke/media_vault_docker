# MediaVault Environment Configuration

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_URL=postgresql://pm_ideas_user:rpXT963It9ZRMFirC6H2z0TQ_RBXc8A_yHpIoRoz_wo@localhost:5433/mediavault
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ============================================================================
# SECURITY
# ============================================================================
JWT_SECRET_KEY=mediavault_secret_key_change_this_in_production_min32chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# First user becomes superuser automatically
ALLOW_REGISTRATION=false

# ============================================================================
# NAS CONFIGURATION
# ============================================================================
NAS_HOST=10.27.10.11
NAS_SMB_USERNAME=ProxmoxBackupsSMB
NAS_SMB_PASSWORD=Setup123
NAS_SMB_SHARE=volume1
NAS_MOUNT_PATH=/mnt/nas-media

# Scan paths (comma-separated)
NAS_SCAN_PATHS=/volume1/docker,/volume1/videos

# Temp deletion staging area
NAS_TEMP_DELETE_PATH=/volume1/video/duplicates_before_purge

# ============================================================================
# TMDB API (The Movie Database)
# ============================================================================
TMDB_API_KEY=8c6d956e5e4a94ca19adbbb782495a89
TMDB_READ_ACCESS_TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4YzZkOTU2ZTVlNGE5NGNhMTlhZGJiYjc4MjQ5NWE4OSIsIm5iZiI6MTc2MjYwOTc0NS41OCwic3ViIjoiNjkwZjRhNTE0N2QxZmFiNDljMzFhYWU1Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.Ai1G41L66BpKLlEtYLMC_X3UmogP9QTibH4zsUl7WaM
TMDB_BASE_URL=https://api.themoviedb.org/3/
TMDB_RATE_LIMIT=40

# ============================================================================
# AZURE OPENAI (Chat with Your Data)
# ============================================================================
AZURE_OPENAI_KEY=9abCh0KH4swF6vplFQ5GYIOQ6XqYTht6PZQ7xCVK4KtKG0m31UyxJQQJ99BJACYeBjFXJ3w3AAABACOGmjSQ
AZURE_OPENAI_ENDPOINT=https://eastus.api.cognitive.microsoft.com/
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# Chat model deployment
AZURE_DEPLOYMENT_NAME_CHAT=gpt-4o
AZURE_DEPLOYMENT_NAME_CHAT_MINI=gpt-4o-mini

# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME=MediaVault
APP_VERSION=0.1.0
ENVIRONMENT=development
DEBUG=false

# Server
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8007
FRONTEND_PORT=3007

# CORS (Cloudflare domain)
CORS_ORIGINS=https://mediavault.orourkes.me,http://localhost:3007,http://10.27.10.104:3007

# ============================================================================
# FFMPEG / MEDIAINFO
# ============================================================================
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
MEDIAINFO_PATH=/usr/bin/mediainfo

# MD5 hash chunk size (bytes)
MD5_CHUNK_SIZE=8192

# ============================================================================
# DUPLICATE DETECTION
# ============================================================================
# Fuzzy match threshold (0-100)
FUZZY_MATCH_THRESHOLD=85

# Quality difference thresholds
QUALITY_AUTO_APPROVE_THRESHOLD=50
QUALITY_MANUAL_REVIEW_THRESHOLD=20

# Maximum duplicates to process per batch
MAX_DUPLICATES_PER_BATCH=100

# ============================================================================
# DELETION POLICY
# ============================================================================
# Manual approval only (never auto-delete)
AUTO_DELETE_ENABLED=false

# Retention period for pending deletions (days)
PENDING_DELETION_RETENTION_DAYS=30

# Temp directory structure
TEMP_DELETE_SUBDIRS=movies,tv,documentaries

# ============================================================================
# LANGUAGE DETECTION
# ============================================================================
TRUST_FOREIGN_FILM_HEURISTIC=true
REQUIRE_ENGLISH_AUDIO=true

# ============================================================================
# SCANNING
# ============================================================================
DEFAULT_SCAN_TYPE=full
SCAN_MAX_WORKERS=5
SCAN_TIMEOUT=3600

# Video file extensions
VIDEO_EXTENSIONS=.mkv,.mp4,.avi,.m4v,.mov,.wmv,.flv,.webm,.mpg,.mpeg,.ts

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=/var/log/mediavault/mediavault.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# ============================================================================
# LANGFUSE / TRACEFORGE (Observability - Optional)
# ============================================================================
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=http://10.27.10.104:3010
LANGFUSE_PROJECT_ID=
DEV_MEDIA_FALLBACK_PATH=/tmp/mediavault-test
